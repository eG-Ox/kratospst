"use strict";(self.webpackChunksistema_inventario_frontend=self.webpackChunksistema_inventario_frontend||[]).push([[920],{218(e,a,r){r.d(a,{A:()=>n});var t=r(950);const n=()=>{const e=(0,t.useRef)(!0);return(0,t.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}},920(e,a,r){r.r(a),r.d(a,{default:()=>d});var t=r(555),n=r(950),i=r(429),o=r(112),c=r(218),s=r(414);const l={tipo_cliente:"natural",dni:"",ruc:"",nombre:"",apellido:"",razon_social:"",direccion:"",telefono:"",correo:""},d=()=>{const e=(0,c.A)(),[a,r]=(0,n.useState)("simple"),[d,u]=(0,n.useState)([]),[m,h]=(0,n.useState)(null),[p,x]=(0,n.useState)(""),[j,v]=(0,n.useState)(""),[g,b]=(0,n.useState)(!1),[N,_]=(0,n.useState)(l),[f,C]=(0,n.useState)(""),[y,k]=(0,n.useState)(!1),[S,w]=(0,n.useState)(""),[z,A]=(0,n.useState)(""),[E,D]=(0,n.useState)(""),[I,R]=(0,n.useState)([]),[F,P]=(0,n.useState)(""),[L,U]=(0,n.useState)([]),[T,K]=(0,n.useState)(""),[M,B]=(0,n.useState)([]),[q,O]=(0,n.useState)(""),[$,G]=(0,n.useState)(""),[J,Q]=(0,n.useState)([]),[V,X]=(0,n.useState)([]),[H,W]=(0,n.useState)(""),[Y,Z]=(0,n.useState)([]),ee=(0,i.zy)(),ae=(0,n.useCallback)(async()=>{try{const a=await o.pK.getAll();if(!e.current)return;u(a.data||[])}catch(a){console.error("Error cargando clientes:",a)}},[e]),re=(0,n.useCallback)(async()=>{try{const a=await o.DI.tiposPorAlmacen({filtrar_stock:!1});if(!e.current)return;R(a.data||[])}catch(a){console.error("Error cargando tipos:",a)}},[e]),te=(0,n.useCallback)(async()=>{try{const a=await o.dx.listarActivos();if(!e.current)return;X(a.data||[])}catch(a){console.error("Error cargando kits:",a)}},[e]),ne=(0,n.useCallback)(async()=>{try{const a=await o.DI.filtrosCotizacion({tipo:F});if(!e.current)return;U(a.data||[])}catch(a){console.error("Error cargando marcas:",a)}},[F,e]),ie=(0,n.useCallback)(async()=>{try{const a=await o.DI.productosCotizacion({tipo:F,marca:T});if(!e.current)return;B(a.data||[])}catch(a){console.error("Error cargando productos:",a)}},[F,T,e]),oe=(0,n.useCallback)(async a=>{try{const r=await o.DI.buscarProductos({q:a,limit:20});if(!e.current)return;Q(r.data||[])}catch(r){console.error("Error buscando productos:",r)}},[e]);(0,n.useEffect)(()=>{ae(),re(),te()},[ae,re,te]),(0,n.useEffect)(()=>{F?ne():(U([]),K(""),B([]),O(""))},[F,ne]),(0,n.useEffect)(()=>{T?ie():(B([]),O(""))},[T,ie]),(0,n.useEffect)(()=>{const e=setTimeout(()=>{$.trim().length<1?Q([]):oe($.trim())},350);return()=>clearTimeout(e)},[$,oe]);const ce=(0,n.useMemo)(()=>{const e=j.trim().toLowerCase();return e?d.filter(a=>{const r="natural"===a.tipo_cliente||"ce"===a.tipo_cliente?"".concat(a.nombre||""," ").concat(a.apellido||"").trim():a.razon_social||"",t=a.dni||a.ruc||"";return r.toLowerCase().includes(e)||t.toLowerCase().includes(e)}):d},[d,j]),se=Boolean(m),le=e=>{Z(a=>{const r=a.findIndex(a=>String(a.producto_id)===String(e.producto_id)&&String(a.almacen_origen||"productos")===String(e.almacen_origen||"productos"));if(-1===r)return[...a,e];const n=[...a],i=Number(n[r].cantidad||0),o=Number(e.cantidad||0)||1;return n[r]=(0,t.A)((0,t.A)({},n[r]),{},{cantidad:i+o}),n})},de=e=>{const a=Number(e.precio_venta||0);le({producto_id:e.id,codigo:e.codigo,descripcion:e.descripcion,marca:e.marca,almacen_origen:"productos",cantidad:1,precio_regular:a,precio_unitario:a,origen:"manual"}),G(""),Q([])},ue=(e,a)=>{Z(r=>r.map((r,n)=>n===e?(0,t.A)((0,t.A)({},r),a):r))},me=(0,n.useMemo)(()=>{let e=0,a=0;Y.forEach(r=>{const t=Number(r.precio_regular||0),n=Number(r.precio_unitario||0),i=Number(r.cantidad||0);e+=t*i,t>n&&(a+=(t-n)*i)});const r=Math.max(e-a,0);return{subtotal:e,descuento:a,total:r}},[Y]),he=()=>{Z([]),D(""),x(""),h(null),w("")},pe=(0,n.useCallback)(async a=>{try{w("");const r=await o.DI.obtener(a),{cotizacion:t,detalles:n}=r.data;if(!e.current)return;x((null===t||void 0===t?void 0:t.cliente_id)||""),D((null===t||void 0===t?void 0:t.nota)||""),Z((n||[]).map(e=>({producto_id:e.producto_id,codigo:e.codigo,descripcion:e.descripcion,marca:e.marca,almacen_origen:e.almacen_origen||"productos",cantidad:Number(e.cantidad||0),precio_regular:Number(e.precio_regular||0),precio_unitario:Number(e.precio_unitario||0),origen:"kit"===e.almacen_origen?"kit":"manual"}))),h(t.id),window.scrollTo({top:0,behavior:"smooth"})}catch(r){console.error("Error cargando cotizacion:",r),e.current&&w("No se pudo cargar la cotizacion")}},[e]);(0,n.useEffect)(()=>{const e=new URLSearchParams(ee.search).get("edit");e&&pe(e)},[ee.search,pe]);const xe=()=>{_(l),C("")},je=async()=>{if(C(""),"natural"!==N.tipo_cliente){if("ce"===N.tipo_cliente)return/^\d{9}$/.test(N.dni||"")?void C("Para CE registra nombre y apellido manualmente."):void C("El CE debe tener 9 digitos.");if(/^\d{11}$/.test(N.ruc||""))try{var a;k(!0);const n=await o.pK.consultaRuc(N.ruc);if(!e.current)return;var r;if(null!==(a=n.data)&&void 0!==a&&a.success)_(e=>(0,t.A)((0,t.A)({},e),{},{razon_social:n.data.razon_social||"",direccion:n.data.direccion||e.direccion})),C("Datos obtenidos.");else C((null===(r=n.data)||void 0===r?void 0:r.error)||"No se encontraron datos.")}catch(c){console.error("Error consultando RUC:",c),e.current&&C("Error consultando RUC.")}finally{e.current&&k(!1)}else C("El RUC debe tener 11 digitos.")}else{if(!/^\d{8}$/.test(N.dni||""))return void C("El DNI debe tener 8 digitos.");try{var n;k(!0);const a=await o.pK.consultaDni(N.dni);if(!e.current)return;var i;if(null!==(n=a.data)&&void 0!==n&&n.success)_(e=>(0,t.A)((0,t.A)({},e),{},{nombre:a.data.nombre||"",apellido:a.data.apellido||""})),C("Datos obtenidos.");else C((null===(i=a.data)||void 0===i?void 0:i.error)||"No se encontraron datos.")}catch(c){console.error("Error consultando DNI:",c),e.current&&C("Error consultando DNI.")}finally{e.current&&k(!1)}}},ve=Y.length,ge=Boolean(p),be=ve>0&&ge;return(0,s.jsxs)("div",{className:"cotizaciones-container cotizaciones-sap",children:[(0,s.jsxs)("div",{className:"page-header",children:[(0,s.jsxs)("div",{className:"page-header__title",children:[(0,s.jsx)("h5",{children:se?"Editar Cotizacion #".concat(m):"Nueva Cotizacion"}),(0,s.jsx)("span",{className:"page-header__subtitle",children:"Modulo de cotizaciones Kratos Maquinarias"})]}),(0,s.jsxs)("div",{className:"page-header__actions",children:[(0,s.jsx)("span",{className:"status-badge ".concat(be?"ok":"warn"),children:be?"Completo":"Incompleto"}),(0,s.jsxs)("span",{className:"status-pill",children:["Productos: ",ve]}),(0,s.jsxs)("span",{className:"status-pill",children:["Cliente: ",ge?"Si":"No"]}),(0,s.jsxs)("div",{className:"header-buttons",children:[(0,s.jsx)("button",{type:"button",className:"btn-secondary",onClick:he,children:"Limpiar"}),(0,s.jsx)("button",{type:"button",className:"btn-primary",onClick:async()=>{if(w(""),A(""),Y.length)try{const a={cliente_id:p||null,notas:E,productos:Y.map(e=>({producto_id:e.producto_id,cantidad:e.cantidad,precio_unitario:e.precio_unitario,precio_regular:e.precio_regular,almacen_origen:e.almacen_origen}))};let r=null;if(se)await o.DI.editar(m,a),r=m;else{var e;r=null===(e=(await o.DI.crear(a)).data)||void 0===e?void 0:e.id}r&&(async e=>{if(e)try{const a=await o.DI.pdf(e),r=window.URL.createObjectURL(new Blob([a.data],{type:"text/html"}));window.open(r,"_blank","noopener,noreferrer"),setTimeout(()=>window.URL.revokeObjectURL(r),2e3)}catch(a){console.error("Error abriendo PDF:",a),w("No se pudo abrir el PDF")}})(r),he()}catch(t){var a,r;console.error("Error creando cotizacion:",t),w((null===(a=t.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.error)||"Error al guardar cotizacion")}else w("Agrega productos antes de guardar.")},children:se?"Actualizar":"Generar"})]})]})]}),S&&(0,s.jsx)("div",{className:"error-message",children:S}),z&&(0,s.jsx)("div",{className:"warning-message",children:z}),(0,s.jsxs)("div",{className:"cotizacion-grid",children:[(0,s.jsxs)("div",{className:"cotizacion-left",children:[(0,s.jsxs)("div",{className:"cotizacion-card",children:[(0,s.jsxs)("div",{className:"tabs",children:[(0,s.jsx)("button",{className:"simple"===a?"active":"",onClick:()=>r("simple"),children:"Simple"}),(0,s.jsx)("button",{className:"avanzada"===a?"active":"",onClick:()=>r("avanzada"),children:"Avanzada"}),(0,s.jsx)("button",{className:"kits"===a?"active":"",onClick:()=>r("kits"),children:"Kits"})]}),(0,s.jsxs)("div",{className:"cotizacion-panel",children:["simple"===a&&(0,s.jsxs)("div",{className:"filtros-grid",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Tipo de maquina"}),(0,s.jsxs)("select",{value:F,onChange:e=>P(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Selecciona"}),I.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Marca"}),(0,s.jsxs)("select",{value:T,onChange:e=>K(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Selecciona"}),L.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Producto"}),(0,s.jsxs)("select",{value:q,onChange:e=>O(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Selecciona"}),M.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.codigo," - ",e.descripcion]},e.id))]})]}),(0,s.jsx)("button",{type:"button",className:"btn-primary",onClick:()=>{q&&((async e=>{try{const a=(await o.DI.obtenerProducto(e,{})).data,r=Number(a.precio_venta||0);le({producto_id:a.id,codigo:a.codigo,descripcion:a.descripcion,marca:a.marca,almacen_origen:"productos",cantidad:1,precio_regular:r,precio_unitario:r,origen:"manual"})}catch(a){console.error("Error agregando producto:",a)}})(q),P(""),U([]),K(""),B([]),O(""))},children:"Agregar producto"})]}),"avanzada"===a&&(0,s.jsxs)("div",{className:"busqueda-avanzada",children:[(0,s.jsx)("input",{type:"text",placeholder:"Buscar por codigo, descripcion o marca",value:$,onChange:e=>G(e.target.value)}),(0,s.jsx)("div",{className:"resultados",children:J.map(e=>(0,s.jsxs)("button",{type:"button",className:"resultado-item",onClick:()=>de(e),children:[e.codigo," - ",e.descripcion," (",e.marca,")"]},"".concat(e.id,"-").concat(e.codigo)))})]}),"kits"===a&&(0,s.jsxs)("div",{className:"kits-select",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Selecciona un kit"}),(0,s.jsxs)("select",{value:H,onChange:e=>W(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Selecciona..."}),V.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.nombre," - S/. ",Number(e.precio_total||0).toFixed(2)]},e.id))]})]}),(0,s.jsx)("button",{type:"button",className:"btn-primary",onClick:()=>{H&&((async a=>{try{const r=await o.dx.obtenerParaVenta(a),{productos_con_stock:t,productos_sin_stock:n}=r.data;if(!e.current)return;null!==n&&void 0!==n&&n.length?w("Algunos productos del kit no tienen stock."):w(""),(t||[]).map(e=>({producto_id:e.producto_id,codigo:e.codigo,descripcion:e.descripcion,marca:e.marca,almacen_origen:"kit",cantidad:Number(e.cantidad||0),precio_regular:Number(e.precio_unitario||0),precio_unitario:Number(e.precio_final||e.precio_unitario||0),origen:"kit"})).forEach(e=>le(e))}catch(r){console.error("Error cargando kit:",r),e.current&&w("Error al cargar kit")}})(H),W(""))},children:"Cargar kit"}),0===V.length&&(0,s.jsx)("p",{children:"No hay kits activos."})]})]})]}),(0,s.jsxs)("div",{className:"cotizacion-detalle",children:[(0,s.jsx)("h3",{children:"Productos agregados"}),0===Y.length?(0,s.jsx)("div",{className:"empty-state",children:(0,s.jsx)("p",{children:"No hay productos agregados."})}):(0,s.jsxs)("table",{className:"cotizacion-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Codigo"}),(0,s.jsx)("th",{children:"Descripcion"}),(0,s.jsx)("th",{children:"Regular"}),(0,s.jsx)("th",{children:"Final"}),(0,s.jsx)("th",{children:"Cantidad"}),(0,s.jsx)("th",{children:"Subtotal"}),(0,s.jsx)("th",{children:"Origen"}),(0,s.jsx)("th",{})]})}),(0,s.jsx)("tbody",{children:Y.map((e,a)=>{const r=Number(e.cantidad||0)*Number(e.precio_unitario||0);return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.codigo}),(0,s.jsx)("td",{children:e.descripcion}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"number",value:e.precio_regular,onChange:e=>ue(a,{precio_regular:Number(e.target.value||0)})})}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"number",value:e.precio_unitario,onChange:e=>ue(a,{precio_unitario:Number(e.target.value||0)})})}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"number",min:"1",value:e.cantidad,onChange:e=>ue(a,{cantidad:Number(e.target.value||1)})})}),(0,s.jsx)("td",{children:r.toFixed(2)}),(0,s.jsx)("td",{children:"kit"===e.origen?(0,s.jsx)("span",{className:"tag-kit",children:"Kit"}):"Manual"}),(0,s.jsx)("td",{children:(0,s.jsx)("button",{className:"btn-delete",onClick:()=>(e=>{Z(a=>a.filter((a,r)=>r!==e))})(a),children:"Quitar"})})]},"".concat(e.producto_id,"-").concat(a))})})]})]})]}),(0,s.jsxs)("div",{className:"cotizacion-right",children:[(0,s.jsxs)("div",{className:"cotizacion-card",children:[(0,s.jsxs)("div",{className:"cotizacion-section",children:[(0,s.jsx)("label",{children:"Cliente"}),(0,s.jsxs)("div",{className:"cliente-row",children:[(0,s.jsxs)("div",{className:"cliente-search",children:[(0,s.jsx)("input",{type:"text",placeholder:"Buscar cliente por nombre o documento",value:j,onChange:e=>v(e.target.value)}),(0,s.jsxs)("select",{value:p,onChange:e=>x(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Selecciona un cliente"}),ce.map(e=>(0,s.jsxs)("option",{value:e.id,children:["natural"===e.tipo_cliente||"ce"===e.tipo_cliente?"".concat(e.nombre||""," ").concat(e.apellido||"").trim():e.razon_social," ","(",e.dni||e.ruc,")"]},e.id))]}),j.trim().length>0&&(0,s.jsxs)("div",{className:"cliente-resultados",children:[ce.slice(0,10).map(e=>{const a="natural"===e.tipo_cliente||"ce"===e.tipo_cliente?"".concat(e.nombre||""," ").concat(e.apellido||"").trim():e.razon_social,r=e.dni||e.ruc||"";return(0,s.jsxs)("button",{type:"button",className:"cliente-item",onClick:()=>{x(String(e.id)),v(a)},children:[a," (",r,")"]},e.id)}),0===ce.length&&(0,s.jsx)("div",{className:"cliente-vacio",children:"Sin resultados"})]})]}),(0,s.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>b(!0),children:"Nuevo"})]})]}),ge&&(0,s.jsx)("div",{className:"cliente-info",children:(()=>{const e=d.find(e=>String(e.id)===String(p));return e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"RUC/DNI:"})," ",e.ruc||e.dni||"-"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Tel:"})," ",e.telefono||"-"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Dir:"})," ",e.direccion||"-"]})]}):null})()})]}),(0,s.jsxs)("div",{className:"cotizacion-notas",children:[(0,s.jsx)("label",{children:"Notas / Observaciones"}),(0,s.jsx)("textarea",{value:E,onChange:e=>D(e.target.value)})]}),(0,s.jsxs)("div",{className:"cotizacion-summary",children:[(0,s.jsx)("h3",{children:"Resumen de cotizacion"}),(0,s.jsxs)("div",{className:"summary-row",children:[(0,s.jsx)("span",{children:"Subtotal (regular)"}),(0,s.jsxs)("strong",{children:["S/ ",me.subtotal.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"summary-row",children:[(0,s.jsx)("span",{children:"Descuento"}),(0,s.jsxs)("strong",{children:["S/ ",me.descuento.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"summary-total",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsxs)("strong",{children:["S/ ",me.total.toFixed(2)]})]})]})]})]}),g&&(0,s.jsx)("div",{className:"modal-overlay",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h2",{children:"Nuevo Cliente"}),(0,s.jsx)("button",{type:"button",className:"btn-icon",onClick:()=>{xe(),b(!1)},children:"X"})]}),(0,s.jsxs)("div",{className:"modal-body",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Tipo de cliente"}),(0,s.jsxs)("select",{value:N.tipo_cliente,onChange:e=>_((0,t.A)((0,t.A)({},N),{},{tipo_cliente:e.target.value})),children:[(0,s.jsx)("option",{value:"natural",children:"Natural"}),(0,s.jsx)("option",{value:"juridico",children:"Juridico"}),(0,s.jsx)("option",{value:"ce",children:"Carnet de extranjeria"})]})]}),"natural"===N.tipo_cliente||"ce"===N.tipo_cliente?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"ce"===N.tipo_cliente?"CE":"DNI"}),(0,s.jsxs)("div",{className:"consulta-row",children:[(0,s.jsx)("input",{type:"text",maxLength:"ce"===N.tipo_cliente?9:8,value:N.dni,onChange:e=>_((0,t.A)((0,t.A)({},N),{},{dni:e.target.value.trim()}))}),"natural"===N.tipo_cliente&&(0,s.jsx)("button",{type:"button",className:"btn-secondary",onClick:je,disabled:y,children:y?"Consultando...":"Consultar"})]})]}),(0,s.jsxs)("div",{className:"form-row",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Nombre"}),(0,s.jsx)("input",{type:"text",value:N.nombre,onChange:e=>_((0,t.A)((0,t.A)({},N),{},{nombre:e.target.value}))})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Apellido"}),(0,s.jsx)("input",{type:"text",value:N.apellido,onChange:e=>_((0,t.A)((0,t.A)({},N),{},{apellido:e.target.value}))})]})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"RUC"}),(0,s.jsxs)("div",{className:"consulta-row",children:[(0,s.jsx)("input",{type:"text",value:N.ruc,onChange:e=>_((0,t.A)((0,t.A)({},N),{},{ruc:e.target.value.trim()}))}),(0,s.jsx)("button",{type:"button",className:"btn-secondary",onClick:je,disabled:y,children:y?"Consultando...":"Consultar"})]})]}),(0,s.jsx)("div",{className:"form-row",children:(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Razon social"}),(0,s.jsx)("input",{type:"text",value:N.razon_social,onChange:e=>_((0,t.A)((0,t.A)({},N),{},{razon_social:e.target.value}))})]})})]}),f&&(0,s.jsx)("p",{className:"consulta-mensaje",children:f}),(0,s.jsx)("div",{className:"form-row",children:(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Direccion"}),(0,s.jsx)("input",{type:"text",value:N.direccion,onChange:e=>_((0,t.A)((0,t.A)({},N),{},{direccion:e.target.value}))})]})}),(0,s.jsxs)("div",{className:"form-row",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Telefono"}),(0,s.jsx)("input",{type:"text",value:N.telefono,onChange:e=>_((0,t.A)((0,t.A)({},N),{},{telefono:e.target.value}))})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Correo"}),(0,s.jsx)("input",{type:"email",value:N.correo,onChange:e=>_((0,t.A)((0,t.A)({},N),{},{correo:e.target.value}))})]})]})]}),(0,s.jsxs)("div",{className:"modal-footer",children:[(0,s.jsx)("button",{className:"btn-success",onClick:async()=>{try{const a=await o.pK.create(N);if(!e.current)return;const r=a.data||{};if(null!==r&&void 0!==r&&r.ya_existia){const e=null!==r&&void 0!==r&&r.vendedor_nombre?"por ".concat(r.vendedor_nombre):"por otro vendedor";A("Cliente ya registrado ".concat(e,". Se comparti\xf3 contigo."))}else A("");await ae(),x((null===r||void 0===r?void 0:r.id)||""),b(!1),xe()}catch(t){var a,r;if(console.error("Error creando cliente:",t),e.current)w((null===(a=t.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.error)||"Error al crear cliente")}},children:"Crear"}),(0,s.jsx)("button",{className:"btn-secondary",onClick:()=>{xe(),b(!1)},children:"Cancelar"})]})]})})]})}}}]);