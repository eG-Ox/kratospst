"use strict";(self.webpackChunksistema_inventario_frontend=self.webpackChunksistema_inventario_frontend||[]).push([[82],{82(a,e,s){s.r(e),s.d(e,{default:()=>i});var r=s(950),c=s(112),n=s(218),t=s(414);const i=()=>{const a=(0,n.A)(),[e,s]=(0,r.useState)([]),[i,l]=(0,r.useState)(""),[o,d]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!0),h=JSON.parse(localStorage.getItem("usuario")||"{}"),m="admin"===(null===h||void 0===h?void 0:h.rol),k=(0,r.useCallback)(async()=>{try{p(!0);const e=await c.n0.listar();if(!a.current)return;s(e.data||[])}catch(e){console.error("Error cargando backups:",e),a.current&&l("No se pudieron cargar los backups.")}finally{a.current&&p(!1)}},[a]);(0,r.useEffect)(()=>{m&&k()},[k,m]);return m?(0,t.jsxs)("div",{className:"backups-container",children:[(0,t.jsxs)("div",{className:"backups-header",children:[(0,t.jsx)("h1",{children:"Backups"}),(0,t.jsx)("p",{children:"Automatico: L-V 5:00 pm, Sabado 12:00 pm."})]}),(0,t.jsxs)("div",{className:"backups-actions",children:[(0,t.jsx)("button",{type:"button",className:"btn-secondary",onClick:async()=>{l(""),d(!0);try{await c.n0.manual(),a.current&&l("Backup creado correctamente."),await k()}catch(r){var e,s;if(console.error("Error creando backup:",r),a.current)l((null===(e=r.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.error)||"Error al crear backup.")}finally{a.current&&d(!1)}},disabled:o,children:o?"Generando backup...":"Backup manual"}),i&&(0,t.jsx)("div",{className:"helper-text",children:i})]}),(0,t.jsxs)("div",{className:"backups-card",children:[(0,t.jsx)("h2",{children:"Ultimos backups"}),u?(0,t.jsx)("div",{className:"loading",children:"Cargando..."}):0===e.length?(0,t.jsx)("div",{className:"empty-message",children:"No hay backups."}):(0,t.jsx)("div",{className:"backups-list",children:e.map(a=>(0,t.jsx)("div",{className:"backup-item",children:a.archivo},a.archivo))})]})]}):(0,t.jsx)("div",{className:"backups-container",children:(0,t.jsxs)("div",{className:"backups-card",children:[(0,t.jsx)("h1",{children:"Backups"}),(0,t.jsx)("p",{children:"No tienes permisos para ver esta seccion."})]})})}},218(a,e,s){s.d(e,{A:()=>c});var r=s(950);const c=()=>{const a=(0,r.useRef)(!0);return(0,r.useEffect)(()=>(a.current=!0,()=>{a.current=!1}),[]),a}}}]);