"use strict";(self.webpackChunksistema_inventario_frontend=self.webpackChunksistema_inventario_frontend||[]).push([[976],{218(e,a,r){r.d(a,{A:()=>c});var n=r(950);const c=()=>{const e=(0,n.useRef)(!0);return(0,n.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}},918(e,a,r){r.d(a,{B:()=>n});const n=e=>{const a=String(e||"").trim();if(!a)return{ok:!1,error:"QR vacio"};const r=a.replace(/\r/g,""),n=r.includes("\n")?"\n":",",c=r.split(n).map(e=>String(e).trim().replace(/,+$/,"")).filter(e=>e.length>0);if(1===c.length)return{ok:!0,partial:!0,data:{codigo:c[0]}};if(c.length<5)return{ok:!1,error:"QR invalido: se esperan 5 campos (codigo, tipo_maquina, marca, descripcion, ubicacion)"};const i=c[0],o=c[1],t=c[2],s=c[c.length-1],d=c.slice(3,c.length-1).join(",").trim();if(!i||!o||!t||!d||!s)return{ok:!1,error:"QR invalido: campos vacios"};const l=String(s).trim().toUpperCase().match(/^([A-H])\s*(\d+)$/);if(!l)return{ok:!1,error:"Ubicacion invalida. Usa A1, A2, B1..."};const u=Number(l[2]);if(!Number.isInteger(u)||u<=0)return{ok:!1,error:"Numero de ubicacion invalido"};const m=l[1];return{ok:!0,data:{codigo:i,tipo_maquina:o,marca:t,descripcion:d,ubicacion:"".concat(m).concat(u),ubicacion_letra:m,ubicacion_numero:u}}}},976(e,a,r){r.r(a),r.d(a,{default:()=>m});var n=r(555),c=r(950),i=r(534),o=r(112),t=r(918),s=r(218),d=r(414);const l=e=>String(e||"").trim().toUpperCase(),u=e=>String(e||"").trim().toUpperCase().replace(/[^A-Z0-9]/g,""),m=()=>{const e=(0,s.A)(),[a,r]=(0,c.useState)([]),[m,p]=(0,c.useState)([]),[v,h]=(0,c.useState)([]),[g,f]=(0,c.useState)(!0),[x,j]=(0,c.useState)("ingreso"),[b,N]=(0,c.useState)(""),[y,C]=(0,c.useState)("filtro"),[w,_]=(0,c.useState)([]),[k,A]=(0,c.useState)(""),[S,E]=(0,c.useState)(""),[D,R]=(0,c.useState)(""),[I,O]=(0,c.useState)(""),[U,q]=(0,c.useState)(""),[T,M]=(0,c.useState)(""),[P,Q]=(0,c.useState)(!1),[V,F]=(0,c.useState)(!1),[L,G]=(0,c.useState)(!0),[B,K]=(0,c.useState)(null),H=(0,c.useRef)(null),Z=(0,c.useRef)(null),$=(0,c.useRef)(null),z=(0,c.useRef)(null),X=(0,c.useRef)(null),J=(0,c.useRef)(null),W=(0,c.useRef)(0),Y=(0,c.useRef)(""),ee=(0,c.useRef)(0),ae=(0,c.useRef)(!1),re=(0,c.useCallback)(async()=>{try{f(!0);const[a,n,c]=await Promise.all([o.rL.getAll({page:1,limit:2e3}),o.Qu.getAll(),o.FZ.getAll()]);if(!e.current)return;const i=null===a||void 0===a?void 0:a.data,t=Array.isArray(i)?i:(null===i||void 0===i?void 0:i.items)||[];r(t),p(n.data),h(c.data||[])}catch(a){console.error("Error cargando datos:",a),e.current&&O("Error al cargar productos")}finally{e.current&&f(!1)}},[e,2e3]);(0,c.useEffect)(()=>{re()},[re]);const ne=(0,c.useMemo)(()=>{const e={};return(v||[]).forEach(a=>{const r=l(a.codigo);r&&(e[r]=a.nombre)}),e},[v]),ce=(0,c.useCallback)(e=>{const a=l(e);return ne[a]||e||""},[ne]),ie=(0,c.useCallback)(e=>{const a=l(e);return a&&(e=>/^M\d{4}$/.test(l(e)))(a)&&!Object.prototype.hasOwnProperty.call(ne,a)?(q("Marca no registrada: ".concat(a,". El producto se guardar\xe1 con ese c\xf3digo.")),!1):(q(""),!0)},[ne]),oe=(0,c.useMemo)(()=>w.reduce((e,a)=>e+(Number(a.cantidad)||0),0),[w]),te=(0,c.useCallback)(e=>{if(!e)return"-";const a=e.ubicacion_letra||"",r=e.ubicacion_numero||"";return a||r?"".concat(a).concat(r):"-"},[]),se=(0,c.useCallback)(e=>{var a,r,c;const i=(0,t.B)(e);if(!i.ok)return O(i.error||"QR invalido"),q(""),null;if(i.partial)return q(""),{codigo:i.data.codigo,partial:!0};ie(null===(a=i.data)||void 0===a?void 0:a.marca);const o=ce(null===(r=i.data)||void 0===r?void 0:r.marca);var s;return"ingreso"===x?(0,n.A)((0,n.A)({},i.data),{},{marca:o,marca_codigo:null===(s=i.data)||void 0===s?void 0:s.marca}):(0,n.A)((0,n.A)({},i.data),{},{marca:o,marca_codigo:null===(c=i.data)||void 0===c?void 0:c.marca})},[x,ce,ie]),de=(0,c.useMemo)(()=>{const e=new Map;return(a||[]).forEach(a=>{const r=u(a.codigo);r&&e.set(r,a)}),e},[a]),le=(0,c.useCallback)(async a=>{try{const n=await o.rL.getByCodigo(a),c=null===n||void 0===n?void 0:n.data;if(null!==c&&void 0!==c&&c.id)return e.current?(r(e=>e.some(e=>u(e.codigo)===u(c.codigo))?e:[...e,c]),c):c}catch(c){var n;404!==(null===c||void 0===c||null===(n=c.response)||void 0===n?void 0:n.status)&&console.error("Error buscando producto por codigo:",c)}return null},[e]),ue=(0,c.useCallback)(async e=>{const a=u(e);if(!a)return null;const r=de.get(a);return r||await le(e)},[le,de]),me=e=>String(e||"").replace(/\D/g,""),pe=e=>{const a=me(e);return 8===a.length?"dni":11===a.length?"ruc":"desconocido"},ve=(0,c.useCallback)((e,a)=>a&&!a.partial?{marca:a.marca||"",descripcion:a.descripcion||"",tipo:a.tipo_maquina||"",ubicacion:a.ubicacion||""}:e?{marca:e.marca||"",descripcion:e.descripcion||"",tipo:e.tipo_nombre||"",ubicacion:te(e),stock:e.stock}:{marca:"",descripcion:"",tipo:"",ubicacion:""},[te]),he=(0,c.useCallback)(async e=>{const a=String(e||"").trim();if(!a)return;const r=se(a),c=(null===r||void 0===r?void 0:r.codigo)||a;if(!c)return;const i=await ue(c);if("ingreso"===x&&!i&&null!==r&&void 0!==r&&r.partial)return void O("QR completo requerido para registrar producto nuevo");if("salida"===x&&!i)return void O("Producto no encontrado para salida");O("");const o=ve(i,r);_(e=>{const a=e.findIndex(e=>e.codigo===c);if(a>=0){const r=[...e];return r[a]=(0,n.A)((0,n.A)({},r[a]),{},{cantidad:r[a].cantidad+1,info:r[a].info||o}),r}return[...e,{codigo:c,cantidad:1,qrData:r&&!r.partial?r:null,info:o}]}),N(""),K({codigo:c,producto:i||null,qrData:r&&!r.partial?r:null,info:o})},[ve,ue,x,se]),ge=(0,c.useCallback)(e=>{ae.current=e},[]),fe=(0,c.useCallback)(()=>{if(J.current&&(cancelAnimationFrame(J.current),J.current=null),X.current){const e=X.current;X.current=null,"function"===typeof e.stop?e.stop():"function"===typeof e.then&&e.then(e=>{e&&"function"===typeof e.stop&&e.stop()}).catch(()=>{})}z.current&&"function"===typeof z.current.reset&&z.current.reset(),ge(!1)},[ge]),xe=(0,c.useCallback)(()=>{fe(),Z.current&&(Z.current.getTracks().forEach(e=>e.stop()),Z.current=null),H.current&&(H.current.srcObject=null),F(!1)},[fe]),je=(0,c.useCallback)(()=>{try{const e=new(window.AudioContext||window.webkitAudioContext),a=e.createOscillator(),r=e.createGain();a.type="sine",a.frequency.setValueAtTime(880,e.currentTime),r.gain.setValueAtTime(.12,e.currentTime),a.connect(r),r.connect(e.destination),a.start(),a.stop(e.currentTime+.12),a.onended=()=>{e.close()}}catch(e){}},[]),be=(0,c.useCallback)(e=>{const a=Date.now();e===Y.current&&a-ee.current<2500||(Y.current=e,ee.current=a,a-W.current>1200&&(W.current=a,he(e),je()))},[he,je]);(0,c.useEffect)(()=>{const e=e=>{e&&be(String(e))};return window.handleNativeQr=e,()=>{window.handleNativeQr===e&&delete window.handleNativeQr}},[be]);const Ne=(0,c.useCallback)(()=>{if(!ae.current&&H.current&&Z.current&&(ge(!0),z.current&&H.current))try{const e=z.current.decodeFromStream(Z.current,H.current,(e,a)=>{e&&ae.current?be(e.getText()):a&&"NotFoundException"!==a.name&&console.error("Error ZXing:",a)});X.current=e,e&&"function"===typeof e.then&&e.then(e=>{X.current=e}).catch(()=>{})}catch(e){console.error("Error iniciando ZXing:",e)}},[be,ge]);(0,c.useEffect)(()=>()=>xe(),[xe]),(0,c.useEffect)(()=>{_([]),N(""),A(""),E(""),R(""),C("filtro"),K(null)},[x]),(0,c.useEffect)(()=>{if(V&&H.current&&Z.current){H.current.srcObject=Z.current;const e=H.current.play();e&&"function"===typeof e.catch&&e.catch(()=>{});const a=setTimeout(()=>{Ne()},300);return()=>clearTimeout(a)}},[V,Ne]);const ye=async()=>{if(m.length>0)return m[0].id;const a=await o.Qu.create({nombre:"General",descripcion:"Generado autom\xe1ticamente"});return e.current&&p(e=>[...e,a.data]),a.data.id},Ce=async e=>{const a=await ye();return(await o.rL.create({codigo:e,tipo_maquina_id:a,marca:"N/A",descripcion:"",ubicacion:"H1",stock:0,precio_compra:0,precio_venta:0,precio_minimo:0,ficha_web:""})).data.id},we=async a=>{const r=await(async a=>{const r=String(a||"").trim();if(!r)return ye();const n=m.find(e=>String(e.nombre||"").toLowerCase()===r.toLowerCase());if(n)return n.id;const c=await o.Qu.create({nombre:r,descripcion:"Creado desde QR"});return e.current&&p(e=>[...e,c.data]),c.data.id})(a.tipo_maquina),n=null!==a&&void 0!==a&&a.ubicacion&&String(a.ubicacion).trim()?a.ubicacion:"H1",c=ce(null===a||void 0===a?void 0:a.marca);return(await o.rL.create({codigo:a.codigo,tipo_maquina_id:r,marca:c,descripcion:a.descripcion,ubicacion:n,stock:0,precio_compra:0,precio_venta:0,precio_minimo:0,ficha_web:""})).data.id},_e="undefined"!==typeof window&&window.Android&&"function"===typeof window.Android.openQrScanner;return(0,d.jsxs)("div",{className:"movimientos-container ".concat(_e?"gestor-apk":""),children:[(0,d.jsxs)("div",{className:"movimientos-header movimientos-header--compact",children:[(0,d.jsx)("h1",{children:"Gestor de Inventario"}),(0,d.jsx)("p",{children:"Escanea c\xf3digos y registra ingresos o salidas"})]}),(0,d.jsxs)("div",{className:"modo-toggle",children:[(0,d.jsx)("button",{type:"button",className:"btn-toggle ".concat("ingreso"===x?"active":""),onClick:()=>j("ingreso"),disabled:P,children:"Ingreso"}),(0,d.jsx)("button",{type:"button",className:"btn-toggle ".concat("salida"===x?"active":""),onClick:()=>j("salida"),disabled:P,children:"Salida"})]}),I&&(0,d.jsx)("div",{className:"error-message",children:I}),U&&(0,d.jsx)("div",{className:"warning-message",children:U}),T&&(0,d.jsx)("div",{className:"success-message",children:T}),g?(0,d.jsx)("div",{className:"loading",children:"Cargando productos..."}):(0,d.jsx)("form",{className:"movimientos-form",onSubmit:async a=>{if(a.preventDefault(),!P)if(O(""),M(""),w.length){if("salida"===x)for(const e of w){const a=await ue(e.codigo);if(!a)return void O("Producto no encontrado para salida: ".concat(e.codigo));const r=Number(a.stock||0);if(r<Number(e.cantidad||0))return void O("Stock insuficiente para ".concat(e.codigo,". Stock actual: ").concat(r))}try{Q(!0);const a=(()=>{const e=(k||"").trim();if(!e)return"";if("VENTA"===e){const a=me(D),r=pe(a);return a?"ruc"===r?"".concat(e," | RUC: ").concat(a):"".concat(e," | DNI: ").concat(a):e}return S?"".concat(e," | Guia: ").concat(S):e})();if(!a)return void O("Selecciona un motivo");const r=[];for(const e of w){const n=await ue(e.codigo);let c=null===n||void 0===n?void 0:n.id;if(!c){if("salida"===x)return void O("Producto no encontrado para salida: ".concat(e.codigo));c=e.qrData&&!e.qrData.partial?await we(e.qrData):await Ce(e.codigo)}r.push({maquina_id:c,tipo:x,cantidad:parseInt(e.cantidad,10),motivo:a})}await o.uA.registrarBatch(r),e.current&&(M("Movimientos registrados: ".concat(w.length)),_([]),N(""),A(""),E(""),R(""),C("filtro"),await re(),K(null),setTimeout(()=>{e.current&&M("")},3e3))}catch(c){var r,n;if(console.error("Error registrando movimiento:",c),e.current)O((null===(r=c.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.error)||"Error al registrar movimiento")}finally{e.current&&Q(!1)}}else O("No hay productos escaneados")},children:"filtro"===y?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"inventario-grid inventario-grid--single",children:(0,d.jsxs)("div",{className:"inventario-panel",children:[(0,d.jsx)("div",{className:"form-card",children:(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Motivo *"}),(0,d.jsxs)("select",{value:k,onChange:e=>A(e.target.value),disabled:P,children:[(0,d.jsx)("option",{value:"",children:"Selecciona un motivo"}),"ingreso"===x?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("option",{value:"COMPRA",children:"COMPRA"}),(0,d.jsx)("option",{value:"DEVOLUCION",children:"DEVOLUCION"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("option",{value:"VENTA",children:"VENTA"}),(0,d.jsx)("option",{value:"DEVOLUCION",children:"DEVOLUCION"}),(0,d.jsx)("option",{value:"CAMBIO DE CODIGO",children:"CAMBIO DE CODIGO"})]})]})]}),("COMPRA"===k||"DEVOLUCION"===k)&&(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Numero de guia *"}),(0,d.jsx)("input",{type:"text",placeholder:"Ej. 000-12345",value:S,onChange:e=>E(e.target.value),disabled:P})]}),"VENTA"===k&&(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"DNI o RUC *"}),(0,d.jsx)("input",{type:"text",placeholder:"Ingresa DNI (8) o RUC (11)",value:D,onChange:e=>R(e.target.value.replace(/\D/g,"")),disabled:P})]})]})}),(0,d.jsx)("div",{className:"action-card",children:(0,d.jsx)("button",{type:"button",className:"btn-primary",onClick:async()=>{if(O(""),!P)if(k)if("COMPRA"!==k&&"DEVOLUCION"!==k||S.trim()){if("VENTA"===k){if(!await(async()=>{const a=me(D);if(!a)return O("DNI o RUC requerido para VENTA"),!1;const r=pe(a);if("desconocido"===r)return O("Documento invalido: ingresa 8 (DNI) o 11 (RUC) digitos"),!1;try{var n;const s=await o.pK.getAll({documento:a});if(Array.isArray(s.data)&&s.data.length)return!0;if("dni"===r){var c;const r=await o.pK.consultaDni(a);var i;return null!==(c=r.data)&&void 0!==c&&c.success?(await o.pK.create({tipo_cliente:"natural",dni:a,nombre:r.data.nombre,apellido:r.data.apellido}),!0):(e.current&&O((null===(i=r.data)||void 0===i?void 0:i.error)||"No se pudo validar DNI"),!1)}const d=await o.pK.consultaRuc(a);var t;return null!==(n=d.data)&&void 0!==n&&n.success?(await o.pK.create({tipo_cliente:"juridico",ruc:a,razon_social:d.data.razon_social,direccion:d.data.direccion}),!0):(e.current&&O((null===(t=d.data)||void 0===t?void 0:t.error)||"No se pudo validar RUC"),!1)}catch(s){return console.error("Error validando documento:",s),e.current&&O("No se pudo validar documento"),!1}})())return}C("scan")}else O("Numero de guia requerido");else O("Selecciona un motivo")},disabled:P,children:"Continuar"})})]})}),(0,d.jsx)("div",{className:"summary-section",children:(0,d.jsxs)("div",{className:"info-card summary-card summary-card--compact",children:[(0,d.jsx)("h3",{children:"Resumen"}),(0,d.jsxs)("p",{children:["Accion: ",(0,d.jsx)("strong",{children:"ingreso"===x?"Ingreso":"Salida"})]}),(0,d.jsxs)("p",{children:["Motivo: ",(0,d.jsx)("strong",{children:k||"-"})]}),(0,d.jsxs)("p",{children:["Guia/DNI/RUC: ",(0,d.jsx)("strong",{children:S||D||"-"})]}),(0,d.jsx)("p",{className:"muted",children:"Confirma el motivo antes de escanear."})]})})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"inventario-grid",children:[(0,d.jsxs)("div",{className:"inventario-panel",children:[(0,d.jsxs)("div",{className:"barcode-card",children:[(0,d.jsx)("label",{htmlFor:"codigo",children:"CODIGO"}),(0,d.jsx)("div",{className:"code-input-row",children:(0,d.jsx)("input",{id:"codigo",type:"text",value:b,onChange:e=>N(e.target.value.trim()),placeholder:"Escanea o escribe el codigo",disabled:P,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),he(b))}})}),(0,d.jsx)("div",{className:"code-actions",children:(0,d.jsx)("button",{type:"button",className:"btn-camera btn-camera--icon",onClick:async()=>{"undefined"!==typeof window&&window.Android&&"function"===typeof window.Android.openQrScanner?window.Android.openQrScanner():(V||await(async()=>{O(""),ge(!1),Y.current="",ee.current=0;try{if(!window.isSecureContext)return void O("Para usar la camara en celular necesitas HTTPS. Abre el sitio en https:// o usa un tunel HTTPS.");$.current=null,z.current||(z.current=new i.sx),G(!0);const e={video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}},audio:!1},a=await navigator.mediaDevices.getUserMedia(e);Z.current=a,H.current&&(H.current.srcObject=a),F(!0)}catch(e){console.error("Error accediendo a camara:",e),O("No se pudo acceder a la camara"),F(!1)}})(),ae.current?fe():Ne())},"aria-label":"Abrir camara y escanear",disabled:P,children:(0,d.jsx)("span",{className:"btn-camera__emoji","aria-hidden":"true",children:"\ud83d\udcf7"})})})]}),(0,d.jsxs)("div",{className:"form-card",children:[(0,d.jsx)("h3",{children:"Productos escaneados"}),0===w.length?(0,d.jsx)("p",{className:"muted",children:"Aun no hay productos en la lista."}):(0,d.jsx)("div",{className:"batch-list",children:w.map(e=>{var a,r,c,i,o,t,s;return(0,d.jsxs)("div",{className:"batch-item",children:[(0,d.jsxs)("div",{className:"batch-item__info",children:[(0,d.jsx)("div",{className:"batch-item__code",children:e.codigo}),(0,d.jsxs)("div",{className:"batch-item__meta",children:[((null===(a=e.info)||void 0===a?void 0:a.marca)||(null===(r=e.info)||void 0===r?void 0:r.tipo))&&(0,d.jsxs)("span",{children:[(null===(c=e.info)||void 0===c?void 0:c.marca)||"Sin marca",null!==(i=e.info)&&void 0!==i&&i.tipo?" \xb7 ".concat(e.info.tipo):""]}),"salida"===x&&Number.isFinite(null===(o=e.info)||void 0===o?void 0:o.stock)&&(0,d.jsxs)("span",{children:["Stock actual: ",e.info.stock]}),(null===(t=e.info)||void 0===t?void 0:t.descripcion)&&(0,d.jsx)("span",{className:"batch-item__desc",children:e.info.descripcion}),(null===(s=e.info)||void 0===s?void 0:s.ubicacion)&&(0,d.jsxs)("span",{children:["Ubicacion: ",e.info.ubicacion]})]})]}),(0,d.jsxs)("div",{className:"batch-item__actions",children:[(0,d.jsx)("input",{type:"number",min:"1",value:e.cantidad,onChange:a=>((e,a)=>{const r=Number(a||0);!Number.isFinite(r)||r<=0||_(a=>a.map(a=>a.codigo===e?(0,n.A)((0,n.A)({},a),{},{cantidad:r}):a))})(e.codigo,a.target.value),disabled:P}),(0,d.jsx)("button",{type:"button",className:"btn-link",onClick:()=>{return a=e.codigo,void _(e=>e.filter(e=>e.codigo!==a));var a},disabled:P,children:"Quitar"})]})]},e.codigo)})})]})]}),(0,d.jsx)("div",{className:"inventario-panel",children:(0,d.jsxs)("div",{className:"info-card product-card",children:[(0,d.jsx)("h3",{children:"Detalle del producto"}),(0,d.jsx)("div",{className:"producto-datos",children:null!==B&&void 0!==B&&B.producto?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Producto:"})," ",B.producto.marca||"Sin marca"]}),(0,d.jsxs)("p",{className:"producto-datos__desc",children:[(0,d.jsx)("strong",{children:"Descripcion:"})," ",B.producto.descripcion||"Sin descripcion"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Ubicacion:"})," ",te(B.producto)]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Stock actual:"})," ",B.producto.stock]})]}):null!==B&&void 0!==B&&B.qrData?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Producto:"})," ",B.qrData.marca]}),(0,d.jsxs)("p",{className:"producto-datos__desc",children:[(0,d.jsx)("strong",{children:"Descripcion:"})," ",B.qrData.descripcion]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Ubicacion:"})," ",B.qrData.ubicacion]}),(0,d.jsx)("p",{className:"producto-vacio",children:"Producto no encontrado: se creara si es ingreso"})]}):null!==B&&void 0!==B&&B.codigo?(0,d.jsxs)("p",{className:"producto-vacio",children:["Producto no encontrado: ",B.codigo]}):(0,d.jsx)("p",{className:"producto-vacio",children:"Escanea un producto para ver detalle"})})]})})]}),(0,d.jsxs)("div",{className:"summary-section",children:[(0,d.jsxs)("div",{className:"info-card summary-card summary-card--compact",children:[(0,d.jsx)("h3",{children:"Resumen"}),(0,d.jsxs)("p",{children:["Items: ",(0,d.jsx)("strong",{children:w.length})]}),(0,d.jsxs)("p",{children:["Unidades: ",(0,d.jsx)("strong",{children:oe})]}),(0,d.jsxs)("p",{children:["Accion: ",(0,d.jsx)("strong",{children:"ingreso"===x?"Ingreso":"Salida"})]}),(0,d.jsxs)("p",{children:["Motivo: ",(0,d.jsx)("strong",{children:k||"-"})]}),(0,d.jsxs)("p",{children:["Guia/DNI/RUC: ",(0,d.jsx)("strong",{children:S||D||"-"})]})]}),(0,d.jsxs)("div",{className:"action-card action-card--compact",children:[(0,d.jsx)("button",{type:"submit",className:"btn-primary",disabled:P,children:P?"Registrando...":"Registrar ".concat("ingreso"===x?"Ingreso":"Salida")}),(0,d.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>C("filtro"),disabled:P,children:"Volver"})]})]})]})}),V&&(0,d.jsxs)("div",{className:"camera-modal",role:"dialog","aria-modal":"true","aria-label":"Camara",children:[(0,d.jsx)("div",{className:"camera-modal__backdrop",onClick:xe}),(0,d.jsxs)("div",{className:"camera-modal__content",children:[(0,d.jsxs)("div",{className:"camera-modal__header",children:[(0,d.jsx)("h3",{children:"Escaner de codigo"}),(0,d.jsx)("button",{type:"button",className:"btn-link",onClick:xe,children:"Cerrar"})]}),(0,d.jsxs)("div",{className:"camera-modal__preview",children:[(0,d.jsx)("video",{ref:H,autoPlay:!0,playsInline:!0,muted:!0,onLoadedMetadata:Ne,onCanPlay:Ne}),(0,d.jsxs)("div",{className:"scan-overlay","aria-hidden":"true",children:[(0,d.jsx)("div",{className:"scan-cross"}),(0,d.jsx)("div",{className:"scan-line"})]})]}),(0,d.jsx)("p",{className:"camera-note",children:L?"Escaneo automatico activado. Apunta el codigo al centro.":"Este navegador no soporta lector nativo. Escribe el codigo manualmente."})]})]})]})}}}]);