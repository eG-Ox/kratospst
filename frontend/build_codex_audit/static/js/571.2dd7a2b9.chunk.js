"use strict";(self.webpackChunksistema_inventario_frontend=self.webpackChunksistema_inventario_frontend||[]).push([[571],{571(e,t,a){a.r(t),a.d(t,{default:()=>c});var r=a(555),n=a(950),s=a(112),i=a(414);const c=()=>{const[e,t]=(0,n.useState)([]),[a,c]=(0,n.useState)(""),[d,o]=(0,n.useState)(!1),l=(0,n.useCallback)(async()=>{try{o(!0);const e=await s.XR.requerimientosPendientes({q:a.trim()||void 0});t(e.data||[])}catch(e){console.error("Error cargando requerimientos:",e)}finally{o(!1)}},[a]);(0,n.useEffect)(()=>{const e=setTimeout(()=>{l()},250);return()=>clearTimeout(e)},[l]);return(0,i.jsxs)("div",{className:"requerimientos-container",children:[(0,i.jsxs)("div",{className:"page-header",children:[(0,i.jsxs)("div",{className:"page-header__title",children:[(0,i.jsx)("h5",{children:"Requerimientos Pendientes"}),(0,i.jsx)("span",{className:"page-header__subtitle",children:"Completa proveedor y precios de compra"})]}),(0,i.jsxs)("div",{className:"page-header__actions",children:[(0,i.jsx)("input",{type:"text",placeholder:"Buscar producto",value:a,onChange:e=>c(e.target.value)}),(0,i.jsx)("button",{type:"button",className:"btn-secondary",onClick:l,children:"Buscar"})]})]}),d?(0,i.jsx)("div",{className:"loading",children:"Cargando..."}):(0,i.jsx)("div",{className:"table-container",children:0===e.length?(0,i.jsx)("div",{className:"empty-message",children:"No hay requerimientos pendientes."}):(0,i.jsxs)("table",{className:"ventas-table compact",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Venta ID"}),(0,i.jsx)("th",{children:"Fecha"}),(0,i.jsx)("th",{children:"Cliente"}),(0,i.jsx)("th",{children:"Producto"}),(0,i.jsx)("th",{children:"Cantidad"}),(0,i.jsx)("th",{children:"Proveedor"}),(0,i.jsx)("th",{children:"Compra"}),(0,i.jsx)("th",{children:"Venta"}),(0,i.jsx)("th",{})]})}),(0,i.jsx)("tbody",{children:e.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.ventaId}),(0,i.jsx)("td",{children:e.fechaVenta||"-"}),(0,i.jsx)("td",{children:e.cliente||"-"}),(0,i.jsxs)("td",{children:[e.codigo," ",e.descripcion]}),(0,i.jsx)("td",{children:e.cantidad}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"text",value:e.proveedor||"",onChange:a=>{const n=a.target.value;t(t=>t.map(t=>t.id===e.id?(0,r.A)((0,r.A)({},t),{},{proveedor:n}):t))}})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"number",value:e.precioCompra||"",onChange:a=>{const n=a.target.value;t(t=>t.map(t=>t.id===e.id?(0,r.A)((0,r.A)({},t),{},{precioCompra:n}):t))}})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"number",value:e.precioVenta||"",onChange:a=>{const n=a.target.value;t(t=>t.map(t=>t.id===e.id?(0,r.A)((0,r.A)({},t),{},{precioVenta:n}):t))}})}),(0,i.jsx)("td",{children:(0,i.jsx)("button",{type:"button",className:"btn-primary",onClick:()=>(async(e,t)=>{try{await s.XR.actualizarRequerimiento(e,t),await l()}catch(a){console.error("Error actualizando requerimiento:",a)}})(e.id,{proveedor:e.proveedor,precioCompra:e.precioCompra,precioVenta:e.precioVenta}),children:"Guardar"})})]},e.id))})]})})]})}}}]);