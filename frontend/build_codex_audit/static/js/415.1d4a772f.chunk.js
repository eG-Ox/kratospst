"use strict";(self.webpackChunksistema_inventario_frontend=self.webpackChunksistema_inventario_frontend||[]).push([[415],{415(e,a,s){s.r(a),s.d(a,{default:()=>c});var i=s(555),r=s(950),n=s(112),t=s(414);const c=()=>{const[e,a]=(0,r.useState)([]),[s,c]=(0,r.useState)([]),[l,o]=(0,r.useState)(!0),[d,h]=(0,r.useState)(""),[m,u]=(0,r.useState)(!1),[x,p]=(0,r.useState)(null),[j,b]=(0,r.useState)(!1),[v,N]=(0,r.useState)(null),[g,y]=(0,r.useState)("tipos"),[f,C]=(0,r.useState)(1),[E,M]=(0,r.useState)(0),[w,k]=(0,r.useState)({nombre:"",descripcion:""}),[A,S]=(0,r.useState)({codigo:"",nombre:"",descripcion:""}),q=(0,r.useCallback)(async()=>{try{o(!0);const e=await n.Qu.getAll();a(e.data||[]),h("")}catch(e){console.error("Error cargando tipos de maquina:",e),h("Error al cargar tipos de maquina")}finally{o(!1)}},[]),z=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{var a;const s=(await n.FZ.getAll({page:e,limit:30})).data,i=Array.isArray(s)?s:s.items||[],r=Array.isArray(s)?i.length:null!==(a=s.total)&&void 0!==a?a:i.length;c(i),M(r),C(e)}catch(s){console.error("Error cargando marcas:",s),h("Error al cargar marcas")}},[]);(0,r.useEffect)(()=>{q(),z(1)},[q,z]),(0,r.useEffect)(()=>{"marcas"===g&&z(f)},[g,f,z]);const B=()=>{k({nombre:"",descripcion:""}),p(null)},D=()=>{S({codigo:"",nombre:"",descripcion:""}),N(null)};return(0,t.jsxs)("div",{className:"tipos-container",children:[(0,t.jsx)("div",{className:"tipos-header",children:(0,t.jsx)("h1",{children:"Tipos y Marcas"})}),(0,t.jsxs)("div",{className:"tipos-tabs",children:[(0,t.jsx)("button",{type:"button",className:"tipos-tab ".concat("tipos"===g?"active":""),onClick:()=>y("tipos"),children:"Tipos de Maquinas"}),(0,t.jsx)("button",{type:"button",className:"tipos-tab ".concat("marcas"===g?"active":""),onClick:()=>y("marcas"),children:"Marcas"})]}),d&&(0,t.jsx)("div",{className:"error-message",children:d}),l?(0,t.jsx)("div",{className:"loading",children:"Cargando..."}):(0,t.jsxs)("div",{className:"tipos-grid",children:["tipos"===g&&(0,t.jsxs)("div",{className:"tipos-table-container full",children:[(0,t.jsxs)("div",{className:"section-header",children:[(0,t.jsx)("h2",{children:"Tipos de Maquinas"}),(0,t.jsx)("button",{className:"btn-primary icon-btn-inline",onClick:()=>{B(),u(!0)},title:"Nuevo Tipo",children:(0,t.jsxs)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M11 5h2v14h-2z"}),(0,t.jsx)("path",{d:"M5 11h14v2H5z"})]})})]}),e.length>0?(0,t.jsxs)("table",{className:"tipos-table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Nombre"}),(0,t.jsx)("th",{children:"Descripcion"}),(0,t.jsx)("th",{className:"icon-col",title:"Acciones",children:(0,t.jsx)("span",{className:"icon-label","aria-label":"Acciones",children:"..."})})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.nombre}),(0,t.jsx)("td",{children:e.descripcion||"-"}),(0,t.jsxs)("td",{className:"acciones",children:[(0,t.jsx)("button",{className:"icon-btn icon-btn--edit",onClick:()=>(e=>{k({nombre:e.nombre||"",descripcion:e.descripcion||""}),p(e),u(!0)})(e),title:"Editar","aria-label":"Editar",children:(0,t.jsxs)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M4 17.5V20h2.5L17.9 8.6l-2.5-2.5L4 17.5z"}),(0,t.jsx)("path",{d:"M20.7 7.2a1 1 0 0 0 0-1.4l-2.5-2.5a1 1 0 0 0-1.4 0l-1.7 1.7 2.5 2.5 1.7-1.7z"})]})}),(0,t.jsx)("button",{className:"icon-btn icon-btn--delete",onClick:()=>(async e=>{if(window.confirm("?Estas seguro de que deseas eliminar este tipo de maquina?"))try{await n.Qu.delete(e),await q()}catch(a){console.error("Error eliminando tipo de maquina:",a),h("Error al eliminar tipo de maquina")}})(e.id),title:"Eliminar","aria-label":"Eliminar",children:(0,t.jsxs)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M6 7h12l-1 14H7L6 7z"}),(0,t.jsx)("path",{d:"M9 7V5h6v2h4v2H5V7h4z"})]})})]})]},e.id))})]}):(0,t.jsx)("p",{className:"empty-message",children:"No hay tipos registrados"})]}),"marcas"===g&&(0,t.jsxs)("div",{className:"tipos-table-container full",children:[(0,t.jsxs)("div",{className:"section-header",children:[(0,t.jsx)("h2",{children:"Marcas"}),(0,t.jsx)("button",{className:"btn-primary icon-btn-inline",onClick:()=>{D(),b(!0)},title:"Nueva Marca",children:(0,t.jsxs)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M11 5h2v14h-2z"}),(0,t.jsx)("path",{d:"M5 11h14v2H5z"})]})})]}),s.length>0?(0,t.jsxs)("table",{className:"tipos-table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Codigo"}),(0,t.jsx)("th",{children:"Nombre"}),(0,t.jsx)("th",{children:"Descripcion"}),(0,t.jsx)("th",{className:"icon-col",title:"Acciones",children:(0,t.jsx)("span",{className:"icon-label","aria-label":"Acciones",children:"..."})})]})}),(0,t.jsx)("tbody",{children:s.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.codigo}),(0,t.jsx)("td",{children:e.nombre}),(0,t.jsx)("td",{children:e.descripcion||"-"}),(0,t.jsxs)("td",{className:"acciones",children:[(0,t.jsx)("button",{className:"icon-btn icon-btn--edit",onClick:()=>(e=>{S({codigo:e.codigo||"",nombre:e.nombre||"",descripcion:e.descripcion||""}),N(e),b(!0)})(e),title:"Editar","aria-label":"Editar",children:(0,t.jsxs)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M4 17.5V20h2.5L17.9 8.6l-2.5-2.5L4 17.5z"}),(0,t.jsx)("path",{d:"M20.7 7.2a1 1 0 0 0 0-1.4l-2.5-2.5a1 1 0 0 0-1.4 0l-1.7 1.7 2.5 2.5 1.7-1.7z"})]})}),(0,t.jsx)("button",{className:"icon-btn icon-btn--delete",onClick:()=>(async e=>{if(window.confirm("?Estas seguro de que deseas eliminar esta marca?"))try{await n.FZ.delete(e),1===s.length&&f>1?await z(f-1):await z(f)}catch(a){console.error("Error eliminando marca:",a),h("Error al eliminar marca")}})(e.id),title:"Eliminar","aria-label":"Eliminar",children:(0,t.jsxs)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M6 7h12l-1 14H7L6 7z"}),(0,t.jsx)("path",{d:"M9 7V5h6v2h4v2H5V7h4z"})]})})]})]},e.id))})]}):(0,t.jsx)("p",{className:"empty-message",children:"No hay marcas registradas"}),E>30&&(0,t.jsxs)("div",{className:"pagination",children:[(0,t.jsx)("button",{type:"button",className:"btn-secondary",disabled:f<=1,onClick:()=>C(e=>Math.max(1,e-1)),children:"Anterior"}),(0,t.jsxs)("span",{className:"pagination-info",children:["Pagina ",f," de ",Math.max(1,Math.ceil(E/30))]}),(0,t.jsx)("button",{type:"button",className:"btn-secondary",disabled:f>=Math.max(1,Math.ceil(E/30)),onClick:()=>C(e=>Math.min(Math.max(1,Math.ceil(E/30)),e+1)),children:"Siguiente"})]})]})]}),m&&(0,t.jsx)("div",{className:"modal-overlay",children:(0,t.jsxs)("div",{className:"modal-content modal-sm",children:[(0,t.jsxs)("div",{className:"modal-header",children:[(0,t.jsx)("h2",{children:x?"Editar Tipo":"Nuevo Tipo"}),(0,t.jsx)("button",{type:"button",className:"btn-icon",onClick:()=>{B(),u(!1)},children:"X"})]}),(0,t.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),w.nombre)try{x?await n.Qu.update(x.id,w):await n.Qu.create(w),B(),u(!1),await q()}catch(i){var a,s;console.error("Error guardando tipo de maquina:",i),h((null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.error)||"Error al guardar tipo de maquina")}else h("El nombre es requerido")},children:[(0,t.jsxs)("div",{className:"modal-body",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"Nombre *"}),(0,t.jsx)("input",{type:"text",required:!0,value:w.nombre,onChange:e=>k((0,i.A)((0,i.A)({},w),{},{nombre:e.target.value}))})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"Descripcion"}),(0,t.jsx)("input",{type:"text",value:w.descripcion,onChange:e=>k((0,i.A)((0,i.A)({},w),{},{descripcion:e.target.value}))})]})]}),(0,t.jsxs)("div",{className:"modal-footer",children:[(0,t.jsx)("button",{type:"submit",className:"btn-success",children:x?"Guardar":"Crear"}),(0,t.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>{B(),u(!1)},children:"Cancelar"})]})]})]})}),j&&(0,t.jsx)("div",{className:"modal-overlay",children:(0,t.jsxs)("div",{className:"modal-content modal-sm",children:[(0,t.jsxs)("div",{className:"modal-header",children:[(0,t.jsx)("h2",{children:v?"Editar Marca":"Nueva Marca"}),(0,t.jsx)("button",{type:"button",className:"btn-icon",onClick:()=>{D(),b(!1)},children:"X"})]}),(0,t.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),A.nombre)try{if(v)await n.FZ.update(v.id,A),await z(f);else{const e={nombre:A.nombre,descripcion:A.descripcion};await n.FZ.create(e),await z(1)}D(),b(!1)}catch(i){var a,s;console.error("Error guardando marca:",i),h((null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.error)||"Error al guardar marca")}else h("El nombre de marca es requerido")},children:[(0,t.jsxs)("div",{className:"modal-body",children:[v&&(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"Codigo"}),(0,t.jsx)("input",{type:"text",value:A.codigo,readOnly:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"Nombre *"}),(0,t.jsx)("input",{type:"text",required:!0,value:A.nombre,onChange:e=>S((0,i.A)((0,i.A)({},A),{},{nombre:e.target.value}))})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"Descripcion"}),(0,t.jsx)("input",{type:"text",value:A.descripcion,onChange:e=>S((0,i.A)((0,i.A)({},A),{},{descripcion:e.target.value}))})]})]}),(0,t.jsxs)("div",{className:"modal-footer",children:[(0,t.jsx)("button",{type:"submit",className:"btn-success",children:v?"Guardar":"Crear"}),(0,t.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>{D(),b(!1)},children:"Cancelar"})]})]})]})})]})}}}]);