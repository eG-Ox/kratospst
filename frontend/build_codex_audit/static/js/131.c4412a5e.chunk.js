"use strict";(self.webpackChunksistema_inventario_frontend=self.webpackChunksistema_inventario_frontend||[]).push([[131],{131(n,e,t){t.r(e),t.d(e,{default:()=>s});var i=t(950),a=t(112),o=t(414);const s=()=>{const[n,e]=(0,i.useState)(""),[t,s]=(0,i.useState)(""),[r,l]=(0,i.useState)("SHALOM"),[c,d]=(0,i.useState)(""),[m,p]=(0,i.useState)(""),[u,h]=(0,i.useState)(!1),f=n=>String(n||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return(0,o.jsxs)("div",{className:"rotulos-container",children:[(0,o.jsxs)("div",{className:"rotulos-header",children:[(0,o.jsx)("h1",{children:"Rotulos"}),(0,o.jsx)("p",{children:"Imprime rotulos rapidos con DNI y destino."})]}),(0,o.jsxs)("div",{className:"rotulos-card",children:[(0,o.jsxs)("div",{className:"form-row",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"DNI"}),(0,o.jsx)("input",{type:"text",value:n,onChange:n=>e(n.target.value),placeholder:"Documento"}),c&&(0,o.jsxs)("span",{className:"helper-text",children:["Nombre: ",c]}),m&&(0,o.jsx)("span",{className:"helper-text",children:m})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Destino"}),(0,o.jsx)("input",{type:"text",value:t,onChange:n=>s(n.target.value),placeholder:"Destino"})]})]}),(0,o.jsxs)("div",{className:"form-row",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Agencia"}),(0,o.jsxs)("select",{value:r,onChange:n=>l(n.target.value),children:[(0,o.jsx)("option",{value:"SHALOM",children:"SHALOM"}),(0,o.jsx)("option",{value:"MARVISUR",children:"MARVISUR"}),(0,o.jsx)("option",{value:"OLVA",children:"OLVA"}),(0,o.jsx)("option",{value:"TIENDA",children:"TIENDA"}),(0,o.jsx)("option",{value:"OTROS",children:"OTROS"})]})]}),(0,o.jsx)("div",{className:"form-group form-group-actions",children:(0,o.jsxs)("div",{className:"rotulos-actions",children:[(0,o.jsx)("button",{type:"button",className:"btn-secondary",onClick:async()=>{p("");const e=n.trim();if(/^\d{8}$/.test(e))try{var t;h(!0);const n=await a.pK.consultaDni(e);if(null!==(t=n.data)&&void 0!==t&&t.success){const e="".concat(n.data.nombre||""," ").concat(n.data.apellido||"").trim();d(e),p("Datos obtenidos.")}else{var i;d(""),p((null===(i=n.data)||void 0===i?void 0:i.error)||"No se encontraron datos.")}}catch(o){console.error("Error consultando DNI:",o),d(""),p("Error consultando DNI.")}finally{h(!1)}else p("El DNI debe tener 8 digitos.")},disabled:u,children:u?"Consultando...":"Consultar DNI"}),(0,o.jsx)("button",{type:"button",className:"btn-primary",onClick:()=>{const e=n.trim(),i=t.trim(),a=c.trim();if(!e||!i)return void window.alert("Completa DNI y destino para imprimir.");const o='\n      <html>\n        <head>\n          <meta charset="UTF-8" />\n          <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n          <title>Rotulo</title>\n          <style>\n            body {\n              margin: 0;\n              font-family: \'IBM Plex Sans\', sans-serif;\n              display: flex;\n              align-items: flex-start;\n              justify-content: flex-start;\n              min-height: 100vh;\n              background: #fff;\n              -webkit-print-color-adjust: exact;\n              print-color-adjust: exact;\n            }\n            .sheet {\n              width: calc(297mm - 16mm);\n              height: calc(210mm - 16mm);\n              margin: 8mm;\n              border: 3px solid #f5b000;\n              border-radius: 8mm;\n              padding: 10mm;\n              display: flex;\n              flex-direction: column;\n              align-items: center;\n              justify-content: flex-start;\n              gap: 6mm;\n              text-align: center;\n              position: relative;\n              background: #fff;\n            }\n            .watermark {\n              position: absolute;\n              inset: 16mm 20mm;\n              display: grid;\n              place-items: center;\n              opacity: 0.12;\n              pointer-events: none;\n              z-index: 0;\n            }\n            .watermark img { width: 100%; height: 100%; object-fit: contain; }\n            .logo { width: 50mm; position: absolute; top: 8mm; left: 8mm; }\n            .content {\n              width: 100%;\n              height: 100%;\n              display: flex;\n              flex-direction: column;\n              align-items: center;\n              justify-content: flex-start;\n              gap: 6mm;\n              padding-top: 10mm;\n              z-index: 1;\n            }\n            .header { width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; }\n            .dni { font-size: 22mm; font-weight: 900; color: #0f3f91; letter-spacing: 0.04em; width: 100%; text-align: center; margin: 0; }\n            .nombre { font-size: 30mm; font-weight: 900; color: #0f172a; text-transform: uppercase; line-height: 1.02; margin: 0; }\n            .destino { font-size: 20mm; font-weight: 900; color: #0f3f91; text-transform: uppercase; line-height: 1.08; margin: 0; }\n            .agencia { font-size: 18mm; font-weight: 900; color: #0f3f91; text-transform: uppercase; line-height: 1.08; margin: 0; }\n            .print-btn { position: fixed; top: 12px; right: 12px; padding: 10px 16px; border-radius: 999px; border: 1px solid #cbd5f5; background: #fff; cursor: pointer; }\n            @media print {\n              .print-btn { display: none; }\n              body { min-height: auto; }\n            }\n          </style>\n        </head>\n        <body>\n          <button class="print-btn" onclick="window.print()">Imprimir</button>\n          <div class="sheet">\n            <div class="watermark"><img src="/static/img/KRATOS_LOGO.PNG" alt="" /></div>\n            <img src="/static/img/KRATOS_LOGO.PNG" class="logo" alt="Kratos" />\n            <div class="content" id="rotuloContent">\n              <div class="header">\n                <div class="dni" data-base="22">DNI '.concat(f(e),'</div>\n              </div>\n              <div class="nombre" data-base="30">').concat(f(a||"-"),'</div>\n              <div class="destino" data-base="20">').concat(f(i),"</div>\n              ").concat(r?'<div class="agencia" data-base="18">'.concat(f(r),"</div>"):"","\n            </div>\n          </div>\n          <script>\n            (function () {\n              const container = document.getElementById('rotuloContent');\n              if (!container) return;\n              const maxHeight = () => container.parentElement.clientHeight - 28;\n              const elements = Array.from(container.querySelectorAll('[data-base]'));\n              elements.forEach((el) => {\n                const base = Number(el.getAttribute('data-base')) || 18;\n                el.style.fontSize = base + 'mm';\n              });\n              let guard = 80;\n              while (container.scrollHeight > maxHeight() && guard-- > 0) {\n                elements.forEach((el) => {\n                  const current = parseFloat(el.style.fontSize);\n                  const next = Math.max(current - 0.6, 10);\n                  el.style.fontSize = next + 'mm';\n                });\n              }\n            })();\n          <\/script>\n        </body>\n      </html>\n    "),s=window.open("","_blank");s?(s.document.open(),s.document.write(o),s.document.close()):window.alert("Bloqueador de popups: permite abrir la pestana para imprimir el rotulo.")},children:"Imprimir rotulo"})]})})]})]})]})}}}]);